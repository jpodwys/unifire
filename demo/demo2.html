<html>
  <head>
    <script src="../src/index.js"></script>
    <script>
      function Todo (name) {
        return {
          id: Date.now(),
          name,
          done: false
        }
      }

      const state = {
        todos: [],
        completed: ({ todos }) => todos.filter((todo) => !!todo.done)
      };

      const actions = {
        add ({ state }, name) {
          state.todos = [].concat(state.todos, [ new Todo(name) ])
        },

        toggle ({ state }, id) {
          state.todos = state.todos.map((item) => {
            if (item.id === id) item.done = !item.done;
            return item;
          });
        },

        remove ({ state }, id) {
          state.todos = state.todos.filter((item) => item.id !== id);
        }
      }

      const store = Unifire({ state, actions });

      store.subscribe(({ completed }) => console.log('completed', completed));
    </script>
  </head>
  <body>
    <h1>Open dev tools and have some fun!</h1>
  </body>
</html>