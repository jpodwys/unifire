export default function(n){var r,t,e={},o={},u=new Set,i={},f=new Proxy({},{get:function(n,r){return c(n[r])?n[r](f):n[r]},set:function(n,r,t){return c(n[r])||n[r]===t||(n[r]=i[r]=t,v()),!0}}),c=function(n){return n instanceof Function},a=function(n,r){return void 0===r&&(r={}),Object.assign(r,n)},s=function(n,r){return n instanceof Array?u=new Set(n):(u.clear(),n(new Proxy({},{get:function(n,r){return u.add(r),f[r]}}),{})),u.forEach(function(t){return e[t]&&e[t].add(r||n)}),function(){return u.forEach(function(t){return e[t]&&e[t].delete(r||n)})}},v=function(){clearTimeout(t),t=setTimeout(function(){var n=new Set;for(var t in i)i[t]!==r[t]&&e[t]&&e[t].forEach(function(r){return n.add(r)});n.forEach(function(n){return n(f,r)}),i={},r=a(f)})},d=function(n){for(var t in n instanceof Array||(n=[n]),n){var u=t.state,i=t.actions,v=t.subscribers;for(var d in u)e[d]=new Set;a(i,o),a(u,f),r=a(f);var w=function(n){c(u[n])&&s(u[n],function(){return e[n].forEach(function(n){return n(f,r)})})};for(var b in u)w(b);for(var h in v)s(h)}};return d(n),{state:f,fire:function n(r,t){return o[r]&&o[r]({state:f,fire:n},t)},subscribe:s,register:d}}
//# sourceMappingURL=unifire.es.js.map
