!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n=n||self).unifire=r()}(this,function(){return function(n){var r,t,e={},o={},i=new Set,u={},f=new Proxy({},{get:function(n,r){return c(n[r])?n[r](f):n[r]},set:function(n,r,t){return c(n[r])||n[r]===t||(n[r]=u[r]=t,d()),!0}}),c=function(n){return n instanceof Function},a=function(n,r){return void 0===r&&(r={}),Object.assign(r,n)},s=function(n,r){return n instanceof Array?i=new Set(n):(i.clear(),n(new Proxy({},{get:function(n,r){return i.add(r),f[r]}}),{})),i.forEach(function(t){return e[t]&&e[t].add(r||n)}),function(){return i.forEach(function(t){return e[t]&&e[t].delete(r||n)})}},d=function(){clearTimeout(t),t=setTimeout(function(){var n=new Set;for(var t in u)u[t]!==r[t]&&e[t]&&e[t].forEach(function(r){return n.add(r)});n.forEach(function(n){return n(f,r)}),u={},r=a(f)})},v=function(n){for(var t in n instanceof Array||(n=[n]),n){var i=t.state,u=t.actions,d=t.subscribers;for(var v in i)e[v]=new Set;a(u,o),a(i,f),r=a(f);var y=function(n){c(i[n])&&s(i[n],function(){return e[n].forEach(function(n){return n(f,r)})})};for(var b in i)y(b);for(var h in d)s(h)}};return v(n),{state:f,fire:function n(r,t){return o[r]&&o[r]({state:f,fire:n},t)},subscribe:s,register:v}}});
//# sourceMappingURL=unifire.umd.js.map
